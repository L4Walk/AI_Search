<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>搜索界面</title>

    <link href="http://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <style>
        /* 添加一些简单的样式 */
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            background: #494A5F;
            font-weight: 500;
            font-family: "Microsoft YaHei","宋体","Segoe UI", "Lucida Grande", Helvetica, Arial,sans-serif, FreeSans, Arimo;
        }

        #container {
            width: 500px;
            height: 820px;
            margin: 0 auto;
        }
        div.search {padding: 30px 0;}

        form {
            position: relative;
            width: 300px;
            margin: 0 auto;
        }

        input, button {
            border: none;
            outline: none;
        }

        input {
            width: 100%;
            height: 42px;
            padding-left: 13px;
        }

        button {
            height: 42px;
            width: 42px;
            cursor: pointer;
            position: absolute;
        }

         /*搜索框1*/
         .bar1 {background: #A3D0C3;}
        .bar1 input {
            border: 2px solid #7BA7AB;
            border-radius: 5px;
            background: #F9F0DA;
            color: #9E9C9C;
        }
        .bar1 button {
            top: 0;
            right: 0;
            background: #7BA7AB;
            border-radius: 0 5px 5px 0;
        }
        .bar1 button:before {
            content: "\f002";
            font-family: FontAwesome;
            font-size: 16px;
            color: #F9F0DA;
        }


        .search-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        /*结果框*/
        .results {
            border: 1px solid #ccc;
            padding: 10px;
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>

<body>
    <!--
    <div >
        <div class="search bar1">
            <form>
                <input type="text"  id="searchInput" placeholder="请输入您要搜索的内容...">
                <button type="submit" onclick="search()"></button>
            </form>
        </div>
    </div>
-->

    <div class="search-container">
        <input type="text" id="searchInput" placeholder="输入您的问题...">
        <button onclick="search()">搜索</button>
    </div>

    <div class="results" id="resultsContainer">
        <!-- 这里会显示搜索结果 -->
    </div>

    <script>
        // TODO: 添加与后端交互的JavaScript代码
        async function search() {
    const query = document.getElementById('searchInput').value;
            console.log(query);
    if (!query) {
        alert('请输入您的问题！');
        return;
    }

    const response = await fetch('http://aisearch.chuheng.tech/ask', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ query: query })
    });

    const data = await response.json();

    console.log(data);
    var result = data.result;
    var posts = data.post_data;

    // 显示结果
    const resultsContainer = document.getElementById('resultsContainer');
    resultsContainer.innerHTML = `<strong>答案：</strong> ${data.result}<br><br>`;

    if (data.post_data && data.post_data.length) {
        resultsContainer.innerHTML += '<strong>来源文档：</strong><br>';
        data.post_data.forEach(post => {
            console.log(post);
            const title = post.post_title;
            const url = post.post_url;
            resultsContainer.innerHTML += `- ${title} + ${url}<br>`;
        });
    }
}

    </script>
</body>

</html>
